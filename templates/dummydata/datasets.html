{% extends 'base.html' %} {% load crispy_forms_filters %} {% block content %}

<h1>Data sets of {{ fakeschema.title }}</h1>
<form method="post" id="upload_form">
  {% csrf_token %} {{ form|crispy }}
  <button type="submit" class="btn btn-success" id="click-me">Generate data</button>
</form>
<hr />
{% if fakeschema.schemadatasets.count == 0 %}
<p>No datasets yet.</p>
{%else%}

<table class="table table-strip table-bordered text-center bg-white">
  <thead class="table-primary">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Created</th>
      <th scope="col">Status</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for dataset in fakeschema.schemadatasets.all %}
    <tr>
      <th scope="row">{{forloop.counter}}</th>
      <td>{{ dataset.created }}</td>
      <td>
        {% if dataset.status == 1 %}
        <span class="badge badge-success">Success</span>
        {%else%}
        <span class="badge badge-danger">Something wrong</span>
        {%endif%}
      </td>

      <td>
        <a href="{{dataset.download_link}}" class="btn btn-link">Download</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endif %} {% endblock %}
